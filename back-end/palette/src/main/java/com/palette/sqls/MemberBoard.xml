<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.palette.dao.MemberBoardDao">

 <!--전체 select -->
 <select id="getMemberBoard" parameterType="com.palette.model.MemberBoardDto" resultType="com.palette.model.MemberBoardDto">
	select @rownum:=@rownum+1 as rownum, b.*, m.MEMBER_ID
	from BOARD b 
	join MEMBER m
	on b.MEMBER_SEQ = m.MEMBER_SEQ
	where (@rownum:=0)=0 and b.del = 0 and b.BOARD_AUTH=0 and b.CATEGORY=2
	         	and b.MEMBER_SEQ=#{memberSeq}
	order by b.WRITE_DATE, rownum asc
 </select>
 
 <!--게시판 글쓰기 -->
 <insert id="writeBoard" parameterType="com.palette.model.MemberBoardDto">
 insert into BOARD(MEMBER_SEQ, TITLE, CONTENT, WRITE_DATE, DEL, BOARD_AUTH, CATEGORY )
 values(#{memberSeq}, #{title}, #{content}, now(),0, 0 ,2)
 </insert>
 
 <!--게시판 seq -->
 <select id="currBoardSeq" resultType="java.lang.Integer">
     SELECT max(BOARD_SEQ)
     FROM BOARD
 </select>
 
  <!--자료실 글쓰기 -->
 <insert id="writeLibrary" parameterType="com.palette.model.BoardReferenceDto">
 INSERT INTO BOARD_REFERENCE(BOARD_SEQ, MEMBER_SEQ, URL, FILE_NAME)
 VALUES (#{boardSeq}, #{memberSeq}, #{url}, #{fileName})
 </insert>
 

 
</mapper>